
#Mariana Amaya
#William Gomez

#CONJUNTOS


set I:=1..15; # 

#PARAMETROS

param D{I};
param P{I};
param H{I};
param F{I,I};
param K{I,I};
param C{I,I};


#VARIABLE DE DECISION

var X{I} binary ; #  Si construyo una fabrica en la ciudad I o no
var Y{I,I} binary; # Si construyo un camino entre la ciudad i y la ciudad j
var W{I,I} >=0 integer; # Cantidad de unidades enviadas de la ciudad i a la ciudad j

#FUNCION OBJETIVO

minimize Z: sum{i in I}X[i]*P[i] + sum{i in I, j in I} Y[i,j]*F[i,j] + sum{i in I, j in I} W[i,j]*C[i,j];

#RESTRICCIONES

s.t. cantidadMaximadeFabricas: sum{i in I} X[i] <= 5;
s.t. capacidadPorduccion{i in I}:sum{j in I}W[i,j]<=H[i];
s.t. capacidad3{i in I, j in I}:W[i,j] <= K[i,j];
s.t. demanda{j in I}:sum{i in I}W[i,j]>=D[j];
s.t. relacionFabricaCamino{i in I, j in I}: Y[i,j] <= X[i];
s.t. relacionFabricasCaminos2{i in I}: X[i] <= sum{j in I}Y[i,j];
s.t. noMandarPorDondeNoHayCamino{i in I, j in I}:W[i,j]<=Y[i,j]*999999;
s.t. noConstruirCamino{i in I, j in I}:Y[i,j]<=W[i,j];

#DATOS

data;

param D:=
1	2990
2	7830
3	2910
4	9700
5	3810
6	5580
7	6650
8	3070
9	3070
10	6130
11	1010
12	6800
13	2070
14	6060
15	1020;


param P:=
1	6000000
2	2400000
3	6000000
4	12000000
5	3600000
6	9600000
7	10800000
8	8400000
9	10800000
10	6000000
11	10800000
12	1200000
13	10400000
14	1300000
15	1300000;

param H:=
1	22960
2	18620
3	25340
4	27370
5	18340
6	22750
7	27370
8	24220
9	39690
10	33880
11	22680
12	20230
13	14210
14	32480
15	22470;

param F:
        1        2        3        4        5        6        7        8        9        10       11       12       13       14       15 :=
1   0        6000000  3000000  13500000 13500000 6000000  12000000 9000000  3000000  3000000  9000000  15000000 6000000  15000000 9000000
2   6000000  0        3000000  13500000 6000000  9000000  3000000  10500000 12000000 15000000 15000000 15000000 3000000  15000000 6000000
3   3000000  3000000  0        15000000 12000000 9000000  12000000 3000000  12000000 7500000  9000000  15000000 1500000  9000000  9000000
4   13500000 13500000 15000000 0        7500000  15000000 15000000 12000000 15000000 15000000 4500000  15000000 4500000  9000000  9000000
5   13500000 6000000  12000000 7500000  0        9000000  13500000 6000000  13500000 10500000 3000000  7500000  7500000  10500000 0
6   6000000  9000000  9000000  15000000 9000000  0        4500000  15000000 6000000  7500000  3000000  4500000  15000000 0        15000000
7   12000000 3000000  12000000 15000000 13500000 4500000  0        7500000  9000000  4500000  7500000  4500000  7500000  7500000  7500000
8   9000000  10500000 3000000  12000000 6000000  15000000 7500000  0        12000000 3000000  13500000 6000000  10500000 4500000  0
9   3000000  9000000  12000000 15000000 13500000 9000000  9000000  9000000  0        9000000  4500000  10500000 15000000 0        0
10  3000000  15000000 7500000  15000000 10500000 15000000 4500000  3000000  15000000 0        13500000 15000000 15000000 15000000 15000000
11  9000000  15000000 7500000  15000000 15000000 6000000  6000000  12000000 12000000 9000000  0        7500000  15000000 6000000  3000000
12  15000000 15000000 9000000  4500000  3000000  7500000  7500000  13500000 13500000 15000000 7500000  0        12000000 15000000 12000000
13  6000000  3000000  1500000  15000000 7500000  3000000  4500000  4500000  4500000  4500000  12000000 12000000 0        12000000 12000000
14  15000000 15000000 9000000  4500000  7500000  4500000  7500000  10500000 15000000 15000000 15000000 15000000 0        7500000  7500000
15  9000000  6000000  9000000  9000000  10500000 15000000 7500000  4500000  12000000 12000000 7500000  3000000  12000000 12000000 0 ;


param K:
        1        2        3        4        5        6        7        8        9        10       11       12       13       14       15 :=
1   23659   13267   13682   16035   16784   20045   20908   22865   15084   25545   17573   12740   29094   22731   11491
2   18233   12725   12145   26608   14457   15827   24630   23421   22218   19333   22932   15082   15657   19448   13068
3   25323   17878   24532   28698   26510   13445   17537   29093   20612   10040   23435   18378   14018   11553   21252
4   15497   15223   20323   16902   13041   13118   23089   12980   16964   25159   17209   28349   10351   13388   28463
5   23733   14066   17169   11849   10075   27992   15631   24334   11296   21480   21634   11435   26393   18612   20506
6   24209   11648   23076   26500   17797   15796   11246   28566   26792   20721   16938   21220   13419   21275   12091
7   12300   21127   26997   19767   26606   14376   21636   10302   18273   19566   19631   26397   22895   21333   18720
8   25977   18807   11501   24826   21746   15154   27763   26966   10024   15329   20120   13954   15019   12034   11323
9   21489   21320   23367   21494   26027   20015   26664   22077   12503   21277   29472   12359   15212   24921   26283
10  25188   13967   19397   14388   28080   27222   29250   24943   27868   25810   12143   24657   14433   17692   27479
11  13077   10704   29002   25909   26121   13193   18611   25385   14995   10195   28474   15765   26226   13483   10104
12  14718   17928   21579   25045   25294   25744   10986   12269   12319   13450   29543   19595   21281   24370   29124
13  28123   25778   17113   27530   24667   15162   23356   29262   21812   25470   25326   25869   24010   28366   27040
14  10246   24891   17671   19771   17004   11249   19010   27982   26942   18964   11960   20769   16033   24913   22330
15  13822   25110   21342   19975   20591   18461   12620   20176   24089   11083   29568   15947   26616   22355   11409 ;


param C:
        1      2      3      4      5      6      7      8      9     10     11     12     13     14     15 :=
1   0     256    87     73     67    156   285    59    177    111     77    116    184    174    274
2   97    0     212    293    224   273   142   179    225    167    262    151    239    244    343
3   103   238     0     149    314   340   254   220     81    346    272    263    207    128    285
4   297   312   211       0     56    265   155   280    232     98    338     80    252    277    145
5   176   132   275     269      0     70   168    52    136    102    233    112     64    142    249
6    56   173   320     324    345      0   288   327    155    320    278    224     80    110    217
7   348   149   289     293    204    314      0   329    146    278    142    333    102    212     97
8   231   130   141     309     77    184    219      0     72    172     59     88    114    160    325
9   330   141   264     250    204    311    227   146      0    181    267    192    274    160    339
10  154   296   180     339    264    194    197   159    253      0    236    168    208    210    326
11  301   305   299     139    291    106    138   153    107    321      0    336    144     69    239
12  257   192   303      57    312    219    107   179    242    315     77      0    170    108    262
13  324   208   233     206    350    287     73   245    133    334    249    273      0    254    121
14  143   299   187     212    332    270    348   225    124    123    283    113    264      0    333
15  292   151   268      53    265    292    326   121    212    310    349    189    156    288      0 ;

end;